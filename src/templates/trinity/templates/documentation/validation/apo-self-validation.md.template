# APO Self-Validation Checklists
**Category:** Validation
**Purpose:** Per-agent self-validation checklists for APO quality assurance
**Used By:** APO-1, APO-2, APO-3 (after file generation)
**Last Updated:** 2026-01-15

---

## Overview

Each APO agent performs self-validation after generating documentation files to ensure quality before Phase 3 verification begins.

---

## APO-1 Self-Validation Checklist

**Agent:** APO-1 (Architecture Diagrams & Visual Documentation)
**Responsibility:** Section A files

### Pre-Generation Validation

- [ ] **JUNO Report Read:** Successfully read `global.trinity_docs_session.audit_report`
- [ ] **Section A Variables:** Extracted all required template variables
- [ ] **Fallback Check:** If `juno_incomplete === true`, activated fallback mechanisms
- [ ] **Component Verification:** All listed components verified via Glob (ZERO TOLERANCE)

### File Creation Validation

**For each diagram file created:**

- [ ] **File Exists:** Confirmed file written to correct path
- [ ] **Minimum Length:** File ≥10 lines
- [ ] **Mermaid Block:** Contains `\`\`\`mermaid` code block
- [ ] **Diagram Type:** Correct Mermaid diagram type (graph/erDiagram/sequenceDiagram)
- [ ] **Syntax Valid:** Mermaid syntax is valid (no obvious errors)
- [ ] **Title Present:** Has descriptive title and purpose statement
- [ ] **No Placeholders:** Zero `{{VARIABLE}}` or `[TODO]` markers

### Content Accuracy Validation

**MVC Flow Diagram (if created):**
- [ ] Shows request → controller → model → view flow
- [ ] All components verified in codebase
- [ ] Route paths match discovered endpoints

**Database ER Diagram (if created):**
- [ ] All models from schema file included
- [ ] Relationships (foreign keys) correctly represented
- [ ] Model counts match JUNO report

**API Endpoint Map (if created):**
- [ ] All discovered endpoints included
- [ ] HTTP methods correctly labeled (GET/POST/PUT/DELETE)
- [ ] Grouped by resource logically

**Component Hierarchy (if created):**
- [ ] All discovered components included
- [ ] Parent-child relationships accurate (if detectable)
- [ ] File paths match Glob results

### Final Checklist

- [ ] **File Count:** Created expected number of diagram files (2-4 depending on project)
- [ ] **No Empty Files:** All files have substantial content
- [ ] **Fallback Logging:** If fallback used, logged all `⚠️ FALLBACK:` messages
- [ ] **Success Log:** Logged final file creation summary

---

## APO-2 Self-Validation Checklist

**Agent:** APO-2 (API Documentation & Development Guides)
**Responsibility:** Section B files

### Pre-Generation Validation

- [ ] **JUNO Report Read:** Successfully read `global.trinity_docs_session.audit_report`
- [ ] **Section B Variables:** Extracted all required template variables
- [ ] **Fallback Check:** If `juno_incomplete === true`, activated fallback mechanisms
- [ ] **Template Access:** Successfully read guide templates from `trinity/templates/documentation/`

### File Creation Validation

**getting-started.md:**
- [ ] **File Exists:** Created in `docs/guides/`
- [ ] **Minimum Length:** ≥50 lines
- [ ] **Structure:** Has ## Installation, ## Configuration, ## Running sections
- [ ] **Code Examples:** Contains ≥2 code blocks with setup commands
- [ ] **No Placeholders:** Zero `{{VARIABLE}}` or `[TODO]` markers

**api-development.md (if API exists):**
- [ ] **File Exists:** Created in `docs/guides/`
- [ ] **Minimum Length:** ≥50 lines
- [ ] **Endpoint Examples:** Shows example API calls with curl/fetch
- [ ] **Authentication:** Documents API key/JWT usage if applicable
- [ ] **Error Handling:** Explains common error responses

**deployment.md:**
- [ ] **File Exists:** Created in `docs/guides/`
- [ ] **Minimum Length:** ≥50 lines
- [ ] **Environment Config:** References `.env.example`
- [ ] **Deployment Steps:** Clear 1-2-3 deployment instructions
- [ ] **Database Migration:** Includes migration commands if database exists

**contributing.md:**
- [ ] **File Exists:** Created in `docs/guides/`
- [ ] **Minimum Length:** ≥30 lines
- [ ] **Code Style:** References linting/formatting setup
- [ ] **PR Process:** Explains how to contribute
- [ ] **Testing:** Describes how to run tests

**docs/api/README.md (if API exists):**
- [ ] **File Exists:** Created in `docs/api/`
- [ ] **Endpoint List:** Documents all discovered endpoints
- [ ] **Request/Response:** Shows example requests and responses
- [ ] **Authentication:** Explains API authentication
- [ ] **Error Codes:** Lists common error codes

### Content Accuracy Validation

**Framework Accuracy:**
- [ ] Guide examples match detected framework (Express vs NestJS syntax)
- [ ] Package manager commands match project (npm vs yarn vs pnpm)
- [ ] Test commands match detected test framework (Jest vs Vitest)

**Link Validation:**
- [ ] Internal links point to existing files
- [ ] Cross-references between guides are correct
- [ ] README links to all guides

### Final Checklist

- [ ] **File Count:** Created expected number of guide files (4-5 depending on project)
- [ ] **Code Examples:** Each guide has ≥1 relevant code block
- [ ] **Fallback Logging:** If fallback used, logged all `⚠️ FALLBACK:` messages
- [ ] **Success Log:** Logged final file creation summary

---

## APO-3 Self-Validation Checklist

**Agent:** APO-3 (Configuration Files & Setup Documentation)
**Responsibility:** Section C files

### Pre-Generation Validation

- [ ] **JUNO Report Read:** Successfully read `global.trinity_docs_session.audit_report`
- [ ] **Section C Variables:** Extracted environment variables and configuration
- [ ] **Fallback Check:** If `juno_incomplete === true`, used fallback patterns
- [ ] **Security Check:** Never include actual secret values in `.env.example`

### File Creation Validation

**.env.example:**
- [ ] **File Exists:** Created in project root
- [ ] **Minimum Variables:** ≥5 environment variables (or all discovered)
- [ ] **Grouped by Purpose:** Variables grouped with `#` comment headers
- [ ] **Placeholder Values:** All values are safe placeholders (no real secrets)
- [ ] **Documentation:** Each variable has comment explaining purpose
- [ ] **No Secrets:** Verified no actual API keys, passwords, or tokens included

**README.md updates:**
- [ ] **File Modified:** README.md updated (not overwritten)
- [ ] **New Sections Added:** Added ## Documentation, ## Configuration sections
- [ ] **Links Added:** Links to `docs/guides/getting-started.md` and other guides
- [ ] **Environment Setup:** References `.env.example` with setup instructions
- [ ] **Preserved Existing Content:** Original README content intact

### Content Accuracy Validation

**Environment Variables:**
- [ ] All variables from JUNO report included in `.env.example`
- [ ] Variable names match code usage (from `process.env.VAR_NAME`)
- [ ] Categorized correctly (database, API keys, server config, etc.)
- [ ] Safe example values provided (not production values)

**README Integration:**
- [ ] Documentation section appears after main project description
- [ ] Links use correct relative paths
- [ ] Formatting matches existing README style
- [ ] No duplicate sections created

### Final Checklist

- [ ] **File Count:** Created/updated 2 files (.env.example, README.md)
- [ ] **Security Validated:** Zero real secrets in `.env.example`
- [ ] **Fallback Logging:** If fallback used, logged all `⚠️ FALLBACK:` messages
- [ ] **Success Log:** Logged final file creation summary

---

## Common Validation Rules (All APOs)

### Placeholder Detection

**Run this check on all generated files:**

```javascript
const forbidden_patterns = [
  /{{[A-Z_]+}}/g,           // Unreplaced template variables
  /\[TODO\]/gi,             // TODO markers
  /\[PLACEHOLDER\]/gi,      // Placeholder text
  /lorem ipsum/gi,          // Demo text
  /FIXME/gi                 // Known issues
];

for (const file of generated_files) {
  const content = read_file(file);
  for (const pattern of forbidden_patterns) {
    if (pattern.test(content)) {
      ERROR: `Placeholder found in ${file}: ${pattern}`;
      // Continue but log issue
    }
  }
}
```

**If placeholders found:** Log warning but continue (Phase 3 will catch and deduct points)

### File Path Validation

**Verify all files written to correct directories:**

```javascript
const expected_paths = {
  'APO-1': [
    'docs/architecture/diagrams/',
  ],
  'APO-2': [
    'docs/guides/',
    'docs/api/'
  ],
  'APO-3': [
    './',           // Root for .env.example and README.md
  ]
};

for (const file of generated_files) {
  if (!file.startsWith(expected_paths[agent_name])) {
    ERROR: `File ${file} in wrong directory`;
  }
}
```

### Content Length Validation

**Minimum line counts:**
- Diagram files: 10 lines
- Guide files: 50 lines
- .env.example: 5 lines (or 1 per discovered variable)
- README updates: 10 lines added

**If below threshold:** Log warning (Phase 3 will deduct points)

---

## Self-Validation Output Format

### On Success

```
=== APO-1 SELF-VALIDATION ===

Pre-generation checks: ✅ All passed
Files created: 4/4
  ✅ docs/architecture/diagrams/mvc-flow.md (45 lines)
  ✅ docs/architecture/diagrams/database-er.md (32 lines)
  ✅ docs/architecture/diagrams/api-endpoint-map.md (28 lines)
  ✅ docs/architecture/diagrams/component-hierarchy.md (51 lines)

Content validation: ✅
  ✅ All Mermaid diagrams have valid syntax
  ✅ Zero placeholders found
  ✅ All components verified in codebase

Status: COMPLETE ✅
Proceeding to Phase 3 verification...
```

### On Issues Found

```
=== APO-2 SELF-VALIDATION ===

Pre-generation checks: ✅ All passed
Files created: 5/5
  ✅ docs/guides/getting-started.md (62 lines)
  ✅ docs/guides/api-development.md (78 lines)
  ✅ docs/guides/deployment.md (54 lines)
  ⚠️ docs/guides/contributing.md (28 lines - below 30 minimum)
  ✅ docs/api/README.md (91 lines)

Content validation: ⚠️
  ⚠️ 1 placeholder found: {{TEST_COMMAND}} in getting-started.md
  ✅ All internal links valid
  ⚠️ contributing.md below minimum length

Status: COMPLETE WITH WARNINGS ⚠️
Issues will be caught in Phase 3 verification.
```

---

*Trinity Method v2.0 - Validation Template*
*WO-004: Validation Rules & APO Workflow Templates*
