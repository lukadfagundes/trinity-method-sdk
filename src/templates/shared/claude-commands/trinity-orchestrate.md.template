---
description: Orchestrate work orders and investigations with AJ MAESTRO
---

# Trinity Orchestration

**Purpose:** Execute work orders and investigations using the Trinity Method 19-agent team orchestrated by AJ MAESTRO.

## Usage

### Orchestrate Work Orders
```bash
/trinity-orchestrate @WO-XXX-{task-name}.md
```

**Workflow:**
1. Create work order using `/trinity-workorder` (saved to `trinity/work-orders/`)
2. Execute with `/trinity-orchestrate @WO-001-example.md`
3. **AJ MAESTRO** orchestrates implementation using 19-agent team
4. Deliverables saved per work order specifications

### Orchestrate Investigations
```bash
/trinity-orchestrate @INV-XXX-{title}.md
```

**Workflow:**
1. Create investigation using `/trinity-create-investigation` (saved to `trinity/investigations/`)
2. Execute with `/trinity-orchestrate @INV-001-example.md`
3. **AJ MAESTRO** orchestrates investigation (READ-ONLY)
4. Findings saved to `trinity/reports/`

‚ö†Ô∏è **CRITICAL:** Investigations are READ-ONLY. No code changes during investigation phase.

---

# Trinity Workflow Planning Guide

**For general workflow planning without specific work orders/investigations:**

**Important:** This is a planning guide. Claude will adopt different agent personas sequentially to guide you through each phase of your workflow. All agents are Claude with specialized context‚Äîthere's no parallel AI system running in the background.

## How Trinity Workflows Work

Trinity uses **persona adoption**: Claude sequentially becomes different specialized agents (MON, ROR, TRA, etc.) to guide you through each workflow phase. You maintain control with manual approval at key checkpoints.

**You control the workflow:**
- Choose which phases to execute
- Approve designs before implementation
- Validate outputs at stop points
- Adjust approach based on feedback

## Workflow Selection by Scale

### Small Tasks (1-2 files, <4 hours)

**When to use:**
- Simple bug fixes
- Minor feature additions
- Documentation updates
- Configuration changes

**Workflow:**
```
1. Quick Requirements Analysis
   ‚îî‚îÄ‚îÄ Briefly understand the change needed

2. Direct Implementation
   ‚îú‚îÄ‚îÄ Write code following best practices
   ‚îú‚îÄ‚îÄ Write tests (TDD: RED-GREEN-REFACTOR)
   ‚îî‚îÄ‚îÄ BAS Quality Gates validation

3. Commit and Complete
```

**Characteristics:**
- **Phases:** 2 (Analysis ‚Üí Implementation)
- **Stop Points:** 0 (fast iteration)
- **Agents:** Developer persona (general Claude) + BAS validation
- **Time:** 1-4 hours

**Start with:** Direct implementation or `/trinity-start`

---

### Medium Tasks (3-5 files, 4-8 hours)

**When to use:**
- New features with moderate scope
- Refactoring multiple components
- API changes
- Performance optimizations affecting several files

**Workflow:**
```
Phase 1: Requirements Analysis (MON)
‚îú‚îÄ‚îÄ Analyze functional requirements
‚îú‚îÄ‚îÄ Define acceptance criteria (Given/When/Then format)
‚îú‚îÄ‚îÄ Identify risks and dependencies
‚îî‚îÄ‚îÄ Determine scale confirmation

üìã STOP POINT 1: Review requirements
   User approval required before design phase

Phase 2: Technical Design (ROR)
‚îú‚îÄ‚îÄ Create function signatures (‚â§2 parameters)
‚îú‚îÄ‚îÄ Define error handling strategy
‚îú‚îÄ‚îÄ Document architecture decisions (ADR)
‚îî‚îÄ‚îÄ Define Design Doc compliance criteria

üìã STOP POINT 2: Review design
   User approval required before implementation

Phase 3: Implementation Planning (TRA)
‚îú‚îÄ‚îÄ Break design into implementation tasks
‚îú‚îÄ‚îÄ Sequence tasks by dependencies
‚îú‚îÄ‚îÄ Identify parallelization opportunities
‚îî‚îÄ‚îÄ Define BAS quality gate checkpoints

Phase 4: Implementation (Developer persona + BAS)
‚îú‚îÄ‚îÄ Implement following design
‚îú‚îÄ‚îÄ Write tests (TDD cycle for each task)
‚îú‚îÄ‚îÄ BAS 6-phase validation after each commit:
‚îÇ   1. Linting (auto-fix)
‚îÇ   2. Structure validation
‚îÇ   3. Build verification
‚îÇ   4. Testing (all tests pass)
‚îÇ   5. Coverage check (‚â•80%)
‚îÇ   6. Best practices review
‚îî‚îÄ‚îÄ Commit atomically (1 task = 1 commit)

Phase 5: Code Review (DRA)
‚îú‚îÄ‚îÄ Validate Design Doc compliance (‚â•70% required)
‚îú‚îÄ‚îÄ Check code quality standards
‚îú‚îÄ‚îÄ Verify test coverage
‚îî‚îÄ‚îÄ Approve for completion
```

**Characteristics:**
- **Phases:** 5 (Requirements ‚Üí Design ‚Üí Planning ‚Üí Implementation ‚Üí Review)
- **Stop Points:** 2 (after requirements, after design)
- **Agents:** MON ‚Üí ROR ‚Üí TRA ‚Üí Developer + BAS ‚Üí DRA
- **Time:** 4-8 hours
- **Parallelization:** 15-25% time savings through task independence

**Start with:** `/trinity-requirements`

---

### Large Tasks (6+ files, >8 hours)

**When to use:**
- Major features with wide impact
- Architecture changes
- System refactoring
- Multi-component features

**Workflow:**
```
Phase 1: Requirements Analysis (MON)
‚îú‚îÄ‚îÄ Analyze functional requirements
‚îú‚îÄ‚îÄ Analyze non-functional requirements (performance, security, etc.)
‚îú‚îÄ‚îÄ Define comprehensive acceptance criteria
‚îú‚îÄ‚îÄ Risk assessment and mitigation strategies
‚îî‚îÄ‚îÄ Dependency mapping

üìã STOP POINT 1: Review requirements
   User approval required before design phase

Phase 2: Technical Design (ROR)
‚îú‚îÄ‚îÄ Create comprehensive Design Doc
‚îÇ   ‚îú‚îÄ‚îÄ Function signatures with types
‚îÇ   ‚îú‚îÄ‚îÄ Input/output contracts
‚îÇ   ‚îú‚îÄ‚îÄ Error handling strategy
‚îÇ   ‚îî‚îÄ‚îÄ Architecture overview
‚îú‚îÄ‚îÄ Write Architecture Decision Records (ADRs)
‚îÇ   ‚îú‚îÄ‚îÄ Decision rationale
‚îÇ   ‚îú‚îÄ‚îÄ Alternatives considered
‚îÇ   ‚îî‚îÄ‚îÄ Trade-offs and implications
‚îî‚îÄ‚îÄ Define Design Doc compliance criteria

üìã STOP POINT 2: Review design
   User approval required before planning phase

Phase 3: Strategic Planning (TRA)
‚îú‚îÄ‚îÄ Break design into high-level tasks
‚îú‚îÄ‚îÄ Create 3-phase implementation structure:
‚îÇ   1. Setup (infrastructure, scaffolding)
‚îÇ   2. Core (main functionality)
‚îÇ   3. Finalize (polish, edge cases)
‚îú‚îÄ‚îÄ Identify dependencies and sequencing
‚îú‚îÄ‚îÄ Estimate timelines
‚îî‚îÄ‚îÄ Plan BAS quality gate integration points

üìã STOP POINT 3: Review plan
   User approval required before decomposition

Phase 4: Task Decomposition (EUS)
‚îú‚îÄ‚îÄ Break strategic plan into atomic tasks
‚îÇ   ‚îî‚îÄ‚îÄ Each task: ‚â§2 hours, single responsibility
‚îú‚îÄ‚îÄ Plan TDD cycles for each task:
‚îÇ   ‚îî‚îÄ‚îÄ RED (write test) ‚Üí GREEN (implement) ‚Üí REFACTOR (clean)
‚îú‚îÄ‚îÄ Define commit strategy (1 task = 1 commit)
‚îî‚îÄ‚îÄ Create task execution sequence

Phase 5: Implementation (KIL + BAS)
For each atomic task:
‚îú‚îÄ‚îÄ RED: Write failing test
‚îú‚îÄ‚îÄ GREEN: Implement minimal code to pass
‚îú‚îÄ‚îÄ REFACTOR: Clean up and optimize
‚îú‚îÄ‚îÄ BAS 6-phase validation:
‚îÇ   1. Linting (ESLint/Prettier with auto-fix)
‚îÇ   2. Structure validation
‚îÇ   3. Build verification
‚îÇ   4. Testing (all tests must pass)
‚îÇ   5. Coverage check (‚â•80% required)
‚îÇ   6. Best practices review
‚îî‚îÄ‚îÄ Commit (atomic, 1 task = 1 commit)

Phase 6: Code Review (DRA)
‚îú‚îÄ‚îÄ Validate Design Doc compliance (‚â•70% acceptance criteria met)
‚îú‚îÄ‚îÄ Review code quality against standards
‚îú‚îÄ‚îÄ Verify comprehensive test coverage
‚îú‚îÄ‚îÄ Check for technical debt
‚îî‚îÄ‚îÄ Approve or request changes

Phase 7: Final Audit (JUNO)
‚îú‚îÄ‚îÄ Comprehensive quality audit
‚îú‚îÄ‚îÄ Verify all BAS phases passed
‚îú‚îÄ‚îÄ Check documentation completeness
‚îú‚îÄ‚îÄ Validate compliance score
‚îî‚îÄ‚îÄ Generate audit report (trinity/reports/)

üìã STOP POINT 4: Final review
   User approval for completion
```

**Characteristics:**
- **Phases:** 7 (Requirements ‚Üí Design ‚Üí Planning ‚Üí Decomposition ‚Üí Implementation ‚Üí Review ‚Üí Audit)
- **Stop Points:** 4 (requirements, design, plan, final)
- **Agents:** MON ‚Üí ROR ‚Üí TRA ‚Üí EUS ‚Üí KIL + BAS ‚Üí DRA ‚Üí JUNO
- **Time:** >8 hours
- **Parallelization:** 30-40% time savings through atomic task independence

**Start with:** `/trinity-requirements`

---

## BAS Quality Gates (All Workflows)

Every implementation phase includes BAS 6-phase validation:

### Phase 1: Linting ‚ú®
- ESLint/Prettier auto-fix enabled
- Code formatting consistency
- Basic syntax validation

### Phase 2: Structure üèóÔ∏è
- File organization validation
- Import/export consistency
- Dependency structure

### Phase 3: Build ‚öôÔ∏è
- TypeScript compilation
- Build process verification
- No build errors

### Phase 4: Testing ‚úÖ
- All tests must pass
- Unit tests for new code
- Integration tests where applicable

### Phase 5: Coverage üìä
- Minimum 80% code coverage
- Critical paths fully tested
- Edge cases validated

### Phase 6: Best Practices üéØ
- Design principles followed
- No code duplication (DRY)
- Function complexity limits (‚â§2 params, <200 lines, ‚â§4 nesting)
- Error handling present

**Note:** BAS gates are manual checkpoints where Claude (as BAS) reviews your code. If you have CI/CD enabled (via EIN), these can be automated.

---

## Trinity Agents Quick Reference

**Planning Layer:**
- **MON** - Requirements analysis and scale determination
- **ROR** - Technical design and ADR documentation
- **TRA** - Strategic work planning and sequencing
- **EUS** - Atomic task decomposition (1 task = 1 commit)

**Execution Layer:**
- **KIL** - TDD implementation specialist (RED-GREEN-REFACTOR)
- **BAS** - 6-phase quality gate validator
- **DRA** - Code review and Design Doc compliance

**Support Layer:**
- **APO** - API documentation and inline comments
- **BON** - Dependency management and security
- **CAP** - Configuration and environment files
- **URO** - Code refactoring and technical debt reduction

**Audit Layer:**
- **JUNO** - Comprehensive quality audits and compliance reports

---

## Decision Tree: Which Workflow?

```
Start: What are you building?
‚îÇ
‚îú‚îÄ Affects 1-2 files? ‚Üí SMALL workflow (2 phases, 0 stop points)
‚îÇ  ‚îî‚îÄ Direct implementation with BAS gates
‚îÇ
‚îú‚îÄ Affects 3-5 files? ‚Üí MEDIUM workflow (5 phases, 2 stop points)
‚îÇ  ‚îî‚îÄ /trinity-requirements ‚Üí Design approval ‚Üí Implementation
‚îÇ
‚îî‚îÄ Affects 6+ files? ‚Üí LARGE workflow (7 phases, 4 stop points)
   ‚îî‚îÄ Full planning workflow with comprehensive validation
```

**Complexity Factors:**
- How many files will change?
- Does this affect the architecture?
- Is there uncertainty in the approach?
- Will this require significant testing?

**When in doubt:** Start with `/trinity-requirements` and let MON determine the scale.

---

## Example Usage

### Example 1: Small Task
```
User: "Fix the date validation bug in UserForm component"

Claude: This looks like a Small task (1 file, <1 hour). Let's proceed directly:

1. Analysis: Date validation is currently allowing invalid formats
2. Implementation:
   - Write failing test for date edge cases (RED)
   - Fix validation logic (GREEN)
   - Refactor for clarity (REFACTOR)
3. BAS validation: All 6 phases pass ‚úÖ
4. Commit: "fix(UserForm): validate date format edge cases"
```

### Example 2: Medium Task
```
User: "Add JWT token refresh functionality"

Claude (as MON): This is a Medium-scale task (affects 3 files: auth service, middleware, types).

üìã Requirements:
- Functional: Automatic token refresh on expiry
- Acceptance criteria:
  ‚úÖ Given an expired token
  ‚úÖ When the user makes an authenticated request
  ‚úÖ Then the system automatically refreshes the token
- Risks: Race conditions in concurrent requests

[STOP POINT 1] - Approve requirements?

User: Approved

Claude (as ROR): Creating technical design...
[Design Doc with function signatures, ADR for refresh strategy]

[STOP POINT 2] - Approve design?

User: Approved

Claude (as TRA): Creating implementation plan...
[3-phase plan with 6 tasks, BAS gate checkpoints]

Claude: Beginning implementation with BAS validation...
[KIL + BAS execute tasks with TDD]

Claude (as DRA): Reviewing implementation...
[Design Doc compliance: 85% ‚úÖ, Code quality: PASS ‚úÖ]

Complete! ‚úÖ
```

### Example 3: Large Task
```
User: "Implement user authentication system with email verification"

Claude (as MON): This is a Large-scale task (8+ files, complex workflow).

Use /trinity-requirements to begin comprehensive analysis...
```

---

## Related Commands

- `/trinity-requirements` - Start with MON requirements analysis
- `/trinity-design` - Create technical design with ROR
- `/trinity-plan` - Strategic planning with TRA
- `/trinity-decompose` - Atomic task breakdown with EUS
- `/trinity-start` - Guided workflow selection
- `/trinity-workorder` - Create structured work order for tracking

---

## What would you like to build?

Describe your task and Claude will help you select the appropriate workflow and guide you through each phase with manual approval at stop points.
